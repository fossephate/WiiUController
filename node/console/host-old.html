<!DOCTYPE html>
<html>

<head>
	<script src="https://webrtc.github.io/adapter/adapter-latest.js"></script>
	<script src="https://simplewebrtc.com/latest-v3.js"></script>
	<title>WebRTC Test</title>
</head>

<body>
	<video height="300" id="localVideo"></video>
	<div id="remotesVideos"></div>
</body>

<script>
	var webrtc = new SimpleWebRTC({
        localVideoEl: '',
        remoteVideosEl: '',
        autoRequestMedia: true,
        enableDataChannels: false,
        media: {
            audio: true,
            video: false
        },
        receiveMedia: { // FIXME: remove old chrome <= 37 constraints format
            offerToReceiveAudio: 1,
            offerToReceiveVideo: 0
        },
	});


	// we have to wait until it's ready
	webrtc.on("readyToCall", function() {
		// you can name it anything
		webrtc.joinRoom("TwitchPlaysNintendoSwitch");
	});
	
    // local p2p/ice failure
    webrtc.on('iceFailed', function (peer) {
        console.log('local fail', peer.sid);
        track('iceFailed', {
            source: 'local',
            session: peer.sid,
            peerprefix: peer.browserPrefix,
            prefix: webrtc.capabilities.prefix,
            version: webrtc.capabilities.browserVersion
        });
    });

    // remote p2p/ice failure
    webrtc.on('connectivityError', function (peer) {
        console.log('remote fail', peer.sid);
        track('iceFailed', {
            source: 'remote',
            session: peer.sid,
            peerprefix: peer.browserPrefix,
            prefix: webrtc.capabilities.prefix,
            version: webrtc.capabilities.browserVersion
        });
    });
	
</script>

</html>